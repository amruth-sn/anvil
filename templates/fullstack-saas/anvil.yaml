name: "fullstack-saas"
description: "Complete SaaS application with Next.js 14, TypeScript, and service integrations"
version: "1.0.0"
min_anvil_version: "0.1.0"

variables:
  - name: "project_name"
    type:
      type: "string"
      min_length: 1
      max_length: 50
    prompt: "Project name?"
    required: true

  - name: "project_description" 
    type:
      type: "string"
    prompt: "Project description?"
    default: "A modern SaaS application"
    required: false

  - name: "author_name"
    type:
      type: "string"
    prompt: "Author name?"
    required: false

  - name: "domain"
    type:
      type: "string"
    prompt: "Production domain (without https://)?"
    default: "myapp.com"
    required: false

# Service definitions for composition
services:
  - name: "auth"
    category: "auth" 
    prompt: "Choose authentication provider:"
    options: ["clerk", "none"]
    required: false
    default: "none"

# Predefined service combinations for quick setup
service_combinations:
  - name: "Minimal Setup"
    description: "Basic Next.js app with no external services - perfect for prototyping"
    recommended: false
    services: []
    tags: ["minimal", "prototype", "starter"]

  - name: "Starter Pack"
    description: "Authentication-enabled app - great for getting started quickly"
    recommended: true
    services:
      - category: "auth"
        provider: "clerk"
        config:
          app_name: "Starter App"
          enable_social_login: true
    tags: ["starter", "auth", "recommended"]

features:
  - name: "typescript"
    description: "TypeScript support"
    dependencies: []

  - name: "tailwind" 
    description: "Tailwind CSS for styling"
    dependencies: []

  - name: "app_router"
    description: "Next.js 14 App Router"
    dependencies: []

# Template composition configuration (temporarily disabled for debugging)
# composition:
#   file_merging_strategy: "merge"
#   dependency_resolution: "auto"
#   conditional_files:
#     - path: "middleware.ts"
#       condition: "services.auth in ['clerk', 'auth0']"
#     - path: "app/api/checkout/route.ts"
#       condition: "services.payments != 'none'"
#     - path: "app/api/webhooks/stripe/route.ts"
#       condition: "services.payments == 'stripe'"
#     - path: "app/api/chat/route.ts"
#       condition: "services.ai != 'none'"

hooks:
  post_generate:
    - command: "npm install"
      working_dir: "."
      condition: "always"